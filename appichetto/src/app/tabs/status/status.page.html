<ion-header>
  <ion-toolbar>
    <ion-title>Your status</ion-title>
    <div
      style="padding-right: 4%;"
      slot="end"
      (click)="presentNotificationPopover($event)"
    >
      <ion-button>
        <ion-icon name="notifications-outline" size="large"></ion-icon>
      </ion-button>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item *ngIf="userFriends === undefined">
    <ion-progress-bar type="indeterminate"></ion-progress-bar>
  </ion-item>

  <ion-card *ngIf="this.noFriends">
    <ion-card-content text-center>
        <ion-card-title>You have no friends</ion-card-title>
        <ion-label>To add new friends you can go in:<br></ion-label>  
        <ion-label>Profile -> Friends -> Add friend<br></ion-label>
        <ion-button color="dark" routerLink="/tabs/profile/friends-list">Go</ion-button>  
    </ion-card-content>
  </ion-card>

  <div *ngIf="userFriendsObs | async">
    <ion-list>
      <ion-item
        button
        *ngFor="let friend of userFriends.friends; index as index"
        (click)="goToFriendTicket(index)"
      >
        <ion-avatar item-start>
          <ion-img [src]="friend.photoUrl"></ion-img>
        </ion-avatar>
        <ion-item>{{ friend.name }}</ion-item>
        <div slot="end">
          <ion-list slot="end">
            <ion-text color="danger">
              Debt: -{{ debts[friend.email].toFixed(2) }}€<br />
            </ion-text>
            <ion-text color="success">
              Credit: +{{ credits[friend.email].toFixed(2) }}€<br />
            </ion-text>
            <ion-text>
              Total = {{ (-debts[friend.email] +
              credits[friend.email]).toFixed(2)}}€
            </ion-text>
          </ion-list>
        </div>
      </ion-item>
    </ion-list>
  </div>
</ion-content>
